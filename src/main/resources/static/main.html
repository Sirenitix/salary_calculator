<!DOCTYPE html>
<html lang="en" xmlns:v-slot="http://www.w3.org/1999/XSL/Transform" xmlns:width="http://www.w3.org/1999/xhtml">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Калькулятор</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
</head>


<script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<body>
<div id="app" data-app >
    <div>
        <v-toolbar
                dark
                prominent
                src="http://yesofcorsa.com/wp-content/uploads/2017/01/4K-Lights-Best-Wallpaper-1.jpg"
        >
            <v-app-bar-nav-icon @click.stop="drawer = !drawer" ></v-app-bar-nav-icon>

            <v-toolbar-title>Калькулятор</v-toolbar-title>

            <v-spacer></v-spacer>

            <v-btn icon @click="logout()" th:href="@{/logout}">
                <v-icon>mdi-export</v-icon>
            </v-btn>
        </v-toolbar>
    </div>



    <v-sheet
            height=813
            class="overflow-hidden"
            style="position: relative;"

    >

        <v-form>
            <v-container>
                <v-row>
                    <v-col
                            cols="12"
                            sm="4">
                        <v-text-field
                                label="Должность"
                                placeholder="Должность"
                                solo
                        ></v-text-field>

                        <v-text-field
                                label="Образование"
                                placeholder="Образование"
                                solo
                        ></v-text-field>



                    </v-col>
                    <v-col
                            cols="12"
                            sm="4">
                        <v-text-field
                                label="Категория"
                                placeholder="Категория"
                                solo
                                v-model="category"
                        ></v-text-field>

                        <v-text-field
                                label="Стаж"
                                placeholder="Стаж"
                                solo
                        ></v-text-field>

                        <v-container bg grid-list-md text-center>
                            <v-layout row wrap align-center>
                                <v-flex>
                        <v-checkbox
                                v-model="checkbox" dense
                                :label="`Работа в сельской местности`"
                        ></v-checkbox>
                                </v-flex>
                            </v-layout>
                        </v-container>



                        <v-container bg fill-height grid-list-md text-center>
                            <v-layout row wrap align-center>
                                <v-flex>
                                    <v-btn
                                            color="accent"
                                            elevation="11"
                                            outlined
                                            raised
                                            rounded
                                            text
                                            large
                                            inline
                                            block
                                            @click="calculate"
                                    >Расчитать</v-btn>
                                    <br>
                                    <p style="text-align:center" v-if="result != ''" >{{result}}</p>
                                </v-flex>
                            </v-layout>
                        </v-container>

                    </v-col>
                    <v-col
                            cols="12"
                            sm="4">

<!--      Date picker                  -->

                        <v-dialog
                                ref="dialog"
                                v-model="modal"
                                :return-value.sync="date"
                                persistent
                                width="290px"
                        >
                            <template v-slot:activator="{ on, attrs }">
                                <v-text-field
                                        v-model="date"
                                        label="За период"
                                        prepend-icon="mdi-calendar"
                                        readonly
                                        v-bind="attrs"
                                        v-on="on"
                                ></v-text-field>
                            </template>
                            <v-date-picker
                                    v-model="date"
                                    type="month"
                                    scrollable
                                    dark
                                    locale="ru"
                            >
                                <v-spacer></v-spacer>
                                <v-btn
                                        text
                                        dark
                                        @click="modal = false"
                                >
                                    Cancel
                                </v-btn>
                                <v-btn
                                        text
                                        dark
                                        @click="$refs.dialog.save(date)"
                                >
                                    OK
                                </v-btn>
                            </v-date-picker>
                        </v-dialog>

                        <v-text-field
                                label="Нагрузка"
                                placeholder="Нагрузка"
                                solo
                        ></v-text-field>


                    </v-col>

                </v-row>
            </v-container>

            <v-container
                    class="px-0"
                    fluid
            >

            </v-container>
            <!--        ${checkbox.toString()}                -->

        </v-form>





        <v-navigation-drawer
                v-model="drawer"
                v-if="drawer"
                absolute
                temporary
        >

            <v-list-item>
                <v-list-item-avatar>
                    <v-img src="https://media-exp1.licdn.com/dms/image/C4D03AQEoyyoiCuZw7Q/profile-displayphoto-shrink_200_200/0/1652669880083?e=1660176000&v=beta&t=woqbxhGjofcC-8-SaJBO0VQZ9oyUSGG2rJJnPUNGXHw"></v-img>
                </v-list-item-avatar>

                <v-list-item-content>
                    <v-list-item-title> Suleyev Nurassyl </v-list-item-title>
                </v-list-item-content>
            </v-list-item>

            <v-divider></v-divider>

            <v-list dense>
                <v-list-item th:href="@{/}"
                        link
                >
                    <v-list-item-icon>
                        <v-icon >mdi-view-dashboard</v-icon>
                    </v-list-item-icon>

                    <v-list-item-content >
                        <v-list-item-title >Главная страница</v-list-item-title>
                    </v-list-item-content>

                </v-list-item>

                <v-list-item
                        link
                        th:href="@{/about}"
                >

                    <v-list-item-icon>
                        <v-icon >mdi-forum</v-icon>
                    </v-list-item-icon>

                    <v-list-item-content >
                        <v-list-item-title  >Про приложение</v-list-item-title>
                    </v-list-item-content>

                </v-list-item>
            </v-list>
        </v-navigation-drawer>

    </v-sheet>


</div>
</body>




<script>

    new Vue({
        el: '#app',
        vuetify: new Vuetify(),
        data () {
            return {
                drawer: null,
                items: [
                    { title: 'Главная страница', icon: 'mdi-view-dashboard', ref:'/' },
                    { title: 'Про приложение', icon: 'mdi-forum' , ref: '/about'},
                ],
                date: new Date().toISOString().substr(0, 7),
                menu: false,
                modal: false,
                checkbox: false,
                category: '',
                result: ''

            }
        },

        methods: {
            logout() {
                console.log("logging out")
            },
            calculate() {
                // POST request using axios with error handling
                const itemsToCalculate = { category: this.category};
                // console.log(this.category)
                axios.post("http://localhost:8080/calculate", itemsToCalculate)
                    .then(response =>  this.result = response.data.category)
                    .catch(error => {
                        this.errorMessage = error.message;
                        console.error("There was an error!", error);
                    });
                // console.log("result is " + this.result)
            }

        },

    })



</script>
</html>